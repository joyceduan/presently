<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">

		<link rel="icon" type="image/png" href="presently.png" />

 	    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
		<script src="semantic/out/semantic.js"></script>
		<script src="semantic/out/semantic.min.js"></script>

		<link rel="stylesheet" type="text/css" href="semantic/out/semantic.css">	
		<link rel="stylesheet" type="text/css" href="semantic/out/semantic.min.css">
		<script src='https://cdn.firebase.com/js/client/2.2.1/firebase.js'></script>
	</head>
		<div class="ui grid">
			<div class="sixteen wide column"></div>
			<div class="fifteen wide column"></div>
		</div>
		
		<div class="ui pointing menu">
			  <a class = "item" href = "presentlyprofile.html" >
			    Profile
			  </a>
			  <a class="item" href = "presentlybrowse.html"  >
			    Browse
			  </a>
			  <a class="active item" href = "presentlyevents.html">
			    Events
			  </a>
        		<a class="item"  href = "presentlysignup.html" >
          		Make New Profile
        		</a>
			  <a class="ui item" href = "presentlylogin.html" >
			  	Logout
			  </a>
		</div>
			<body>
			<div class="ui grid">
		 <div class="eight wide column">
		 	<div class = "two wide column"></div>
		 	<font color="white" face ="verdana" align = "center">
		 <div class="ui large header" id = "giftsILike"><b>Gifts I Like:</b></font></div>
		 <p id = "sameTagFriends"> Similar Tags </p>
		 <br> <br> <br>  <br>
		 <div class = "two wide column"></div>
		 <div class="ui large header" id = "personalityTags"><b>Personality Tags:</b></div>
		</font>
		</div>
		<div class="ui card">

   <img class = "ui medium circular image" src= "http://skiuwi.com/Skiuwi/img/GenericUser.png" id = "profilepic">
  <div class="content">
  	<a class="header" id = "displayUserName">User </a>
    <div class="meta">
      <span class="date">Joined in 2015</span>
  </div>
  <div class="extra content">
    <a>
      <i class="user icon"></i>
      22 Friends
    </a>
    </div>
	</div> </div>
		<div class="six wide column"></div>
		<div class="one wide column"></div>
		<div class="sixteen wide column"></div>
		<div class="one wide column"></div>
		
		<div class="ten wide column"></div>
		<div class="four wide column"></div>
		
		<div class="one wide column"></div>
		<!img class="ui medium rounded image" src="hp.jpg" style="width:182px; height:182px">
		<div class="one wide column"></div>
		<!img class="ui medium rounded image" src="necklace.jpg" style="width:182px; height:182px">
		<div class="one wide column"></div>
		<!img class="ui medium rounded image" src="shirt.jpg" style="width:182px; height:182px">
		<div class="four wide column"></div>
		<div class="four wide column"></div>
		<div class="four wide column"></div>
		<div class="four wide column"></div>
		</div>
    
    	<style type="text/css">
			body {
			background: coral;
			font-color: white;
		}

		</style>
    </body>
    <script language="javascript" type="text/javascript">
    	var myDataRef = new Firebase('https://luminous-torch-1254.firebaseio.com/Users');
    	var username = localStorage.getItem("username");
    	document.getElementById("displayUserName").innerHTML = username;
    	var userData;
		myDataRef.once("value", function(snapshot){
    			var data = snapshot.child(username);
    			userData = data.val();
    			pTags = userData.likes;
   	        	console.log(userData);
    		 	//document.getElementById('personalityTags').innerHTML = "Personality Tags: " + userData.likes;
    		 	document.getElementById('personalityTags').style.color = '#FFFFFF'
    		 	document.getElementById('giftsILike').style.color = '#FFFFFF'
    		 	document.getElementById('giftsILike').innerHTML = "Gifts I Like: " + userData.items;
    		 	if(userData.profilepicURL !== ""){
    		 		document.getElementById("profilepic").src = userData.profilepicURL;    		 	
    		 	}

    		 	var tagLinks = document.createElement("p");
    		 	for (item in userData.likes){
    		        tag = pTags[item];
    		 		var x = document.createElement("a");
    		 		x.innerHTML = tag;
    		 		tagPage = 'presentlyTagPage.html?tag='+tag;
    		 		x.setAttribute("href", tagPage);
    		 		tagLinks.appendChild(x);
    		 		tagLinks.appendChild(document.createElement("br"));
 					
    		 	}
    		 	document.getElementById("personalityTags").appendChild(tagLinks); 
    		 	snapshot.forEach(function(childSnapshot) {
   
    	var key = childSnapshot.key();
    	// childData will be the actual contents of the child
    	var childData = childSnapshot.val();
    	childLikes = childData.likes;
    	for(i = 0; i < childLikes.length; i++){
    		var oneLike = childLikes[i];
    		//alert(oneLike);
    		if(pTags.indexOf(oneLike) != -1 && key != username){
    			document.getElementById("sameTagFriends").innerHTML += key;
    		}
    	}
    });
		});
	
		// alert('hello');
		// var newDiv = document.createElement("img");
		// //newDiv.setAttribute('id',);
		// newDiv.setAttribute("src","http://blog.cashcrate.com/wp-content/uploads/2014/08/Taco.png");
		// alert('hello');
		// document.getElementbyId('giftsILike').appendChild(newDiv);
		// alert(userData.items));
		
    </script>
</html>